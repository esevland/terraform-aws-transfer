# terraform-aws-transfer

Sample Terraform module for creating an AWS Transfer Server with a SFTP endpoint.

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.12.0 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 2.70.1 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 4.43.0 |
| <a name="provider_random"></a> [random](#provider\_random) | 3.4.3 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_iam_role.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role) | resource |
| [aws_iam_role_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy) | resource |
| [aws_route53_record.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_transfer_server.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/transfer_server) | resource |
| [random_pet.this](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/pet) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.assume_role_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.logging_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_certificate"></a> [certificate](#input\_certificate) | The Amazon Resource Name (ARN) of the AWS Certificate Manager (ACM) certificate. | `string` | `null` | no |
| <a name="input_endpoint_details"></a> [endpoint\_details](#input\_endpoint\_details) | A block required to setup SFTP server if type is set to `VPC` or `VPC_ENDPOINT`<pre>{<br>  address_allocation_ids = List of address allocation IDs to attach an Elastic IP address to your SFTP server endpoint.<br>  security_group_ids     = List of security groups to attach to the SFTP endpoint. Supported only if endpoint is to type VPC.<br>  subnet_ids             = List of subnets ids within the VPC for hosting SFTP server endpoint. Required if endpoint type is set to VPC.<br>  vpc_id                 = ID of VPC in which SFTP server endpoint will be hosted. Required if endpoint type is set to VPC.<br>}</pre> | <pre>map(object({<br>    address_allocation_ids = list(string)<br>    security_group_ids     = list(string)<br>    subnet_ids             = list(string)<br>    vpc_id                 = string<br>  }))</pre> | `{}` | no |
| <a name="input_endpoint_type"></a> [endpoint\_type](#input\_endpoint\_type) | The type of endpoint that you want your SFTP server connect to. | `string` | `"PUBLIC"` | no |
| <a name="input_host_key"></a> [host\_key](#input\_host\_key) | RSA private key (e.g., as generated by the ssh-keygen -N "" -m PEM -f my-new-server-key command). | `string` | `null` | no |
| <a name="input_logging_role_name"></a> [logging\_role\_name](#input\_logging\_role\_name) | Name of an IAM role that allows the service to write users' activity to CloudWatch logs. | `string` | `"transfer-logging-role"` | no |
| <a name="input_protocols"></a> [protocols](#input\_protocols) | Specifies the file transfer protocol or protocols over which your file transfer protocol client can connect to your server's endpoint. | `list(string)` | <pre>[<br>  "SFTP"<br>]</pre> | no |
| <a name="input_record_name"></a> [record\_name](#input\_record\_name) | The name of the Transfer Server endpoint as a CNAME record. | `string` | `""` | no |
| <a name="input_security_policy_name"></a> [security\_policy\_name](#input\_security\_policy\_name) | Specifies the name of the security policy that is attached to the server. | `string` | `"TransferSecurityPolicy-2022-03"` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to assign to the resource. | `map(string)` | `{}` | no |
| <a name="input_transfer_server_name"></a> [transfer\_server\_name](#input\_transfer\_server\_name) | Name of the AWS Transfer Server. Ignore it to generate a random name for server. | `string` | `null` | no |
| <a name="input_zone_id"></a> [zone\_id](#input\_zone\_id) | The ID of the hosted zone to contain this record. | `string` | `""` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_transfer_server_endpoint"></a> [transfer\_server\_endpoint](#output\_transfer\_server\_endpoint) | The endpoint of the Transfer Server (e.g., s-12345678.server.transfer.REGION.amazonaws.com) |
| <a name="output_transfer_server_id"></a> [transfer\_server\_id](#output\_transfer\_server\_id) | The Server ID of the Transfer Server (e.g., s-12345678). |
<!-- END_TF_DOCS -->
